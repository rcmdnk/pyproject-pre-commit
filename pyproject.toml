[tool.poetry]
name = "pyproject-pre-commit"
version = "0.0.2"
description = "pre-commit hooks for python projects using pyproject.toml."
authors = ["rcmdnk <rcmdnk@gmail.com>"]
repository = "https://github.com/rcmdnk/pyproject-pre-commit"
homepage = "https://github.com/rcmdnk/pyproject-pre-commit"
readme = "README.md"
license = "Apache-2.0"
keywords = ["pre-commit", "pyproject.toml", "poetry"]
classifiers = [
    "Development Status :: 3 - Alpha",
    "Environment :: Console",
    "Intended Audience :: Developers",
    "Operating System :: OS Independent",
    "Topic :: Software Development",
    "Topic :: Software Development :: Libraries :: Python Modules",
    "Topic :: Utilities",
]

[tool.poetry.dependencies]
python = ">=3.9,<3.12"
pre-commit = "^2.21.0"
flake8-pyproject = "^1.2.2"

# 0.17.0 depends on flake8 < 5, the current main branch depends on flake8 ^5.0
# flake8 4.x depends on pycodestyle>=2.8.0,<2.9.0, pyflakes>=2.4.0,<2.5.0
# flake8 5.x depends on pycodestyle>=2.9.0,<2.10.0, pyflakes>=2.5.0,<2.6.0
# flake8 6.x depends on pycodestyle>=2.10.0,<2.11.0, pyflakes>=3.0.0,<3.1.0
wemake-python-styleguide = {git = "https://github.com/wemake-services/wemake-python-styleguide"}

# [Auto-formatters â€” wemake-python-styleguide 0.17.0 documentation](https://wemake-python-styleguide.readthedocs.io/en/latest/pages/usage/integrations/auto-formatters.html?highlight=flake8-print)
autoflake = "^1.7.8" # >= 2.0.0 depends on pyflakes >= 3.0.0
autopep8 = "2.0.0"  # 2.0.1 depends on pycodestyle >= 2.10.0
docformatter = {extras = ["tomli"], version = "^1.5.1"}
unify = "^0.5"
add-trailing-comma ="^2.4.0"
isort = "^5.12.0"

# Others
shellcheck-py = {version = "^0.9.0.2", optional = true}
mdformat = {version = "^0.7.16", optional = true}
mdformat-gfm = {version = "^0.3.5", optional = true}
mdformat-frontmatter = {version = "^0.4.1", optional = true}
mdformat-footnote = {version = "^0.1.1", optional = true}

[tool.poetry.extras]
shell = ["shellcheck-py"]
md = ["mdformat", "mdformat-gfm", "mdformat-frontmatter", "mdformat-footnote"]

[tool.poetry.group.dev.dependencies]
pytest = "^7.2.1"
pytest-cov = "^4.0.0"
pytest-xdist = "^3.1.0"

[build-system]
requires = ["poetry-core>=1.0.0"]
build-backend = "poetry.core.masonry.api"

[tool.pytest.ini_options]
addopts = "-n auto"
testpaths = ["tests",]

[tool.autoflake]
remove-all-unused-imports = true
expand-star-imports = true
remove-duplicate-keys = true
remove-unused-variables = true

[tool.autopep8]
ignore = "W503"
recursive = true
aggressive = 3

[tool.isort]
profile = "wemake"
line_length = 79

[tool.flake8]
# W503 is the counter part of W504, which follows current PEP8: [Line break occurred before a binary operator (W503)](https://www.flake8rules.com/rules/W503.html)
# D100~D106: Missing docstrings other than class (D101)
# D401: First line should be in imperative mood
ignore = "W503,D100,D102,D103,D104,D105,D106,D401"
max-complexity = 10
docstring-convention = "numpy"

[tool.mypy]
files = ["src/**/*.py"]
strict = true
warn_return_any = false
ignore_missing_imports = true
scripts_are_modules = true

[tool.poetry.scripts]
ppc = "pyproject_pre_commit:main"
